var I=0,L=1,A=2,R=3,k=4;function $(t,n={},...r){let o={type:1,name:typeof t=="function"?t.name:t,attributes:n||{},children:r.map(e=>typeof e=="string"?{type:2,value:x(String(e))}:e),parent:void 0,loc:[]};return typeof t=="function"&&P(o,t),o}var b=Symbol("Fragment"),v=new Set(["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),D=/([\@\.a-z0-9_\:\-]*)\s*?=?\s*?(['"]?)(.*?)\2\s+/gim,i=/(?:<(\/?)([a-zA-Z][a-zA-Z0-9\:-]*)(?:\s([^>]*?))?((?:\s*\/)?)>|(<\!\-\-)([\s\S]*?)(\-\->)|(<\!)([\s\S]*?)(>))/gm;function S(t){let n={},r;if(t)for(D.lastIndex=0,t=" "+(t||"")+" ";r=D.exec(t);)r[0]!==" "&&(n[r[1]]=r[3]);return n}function M(t){let n=typeof t=="string"?t:t.value,r,o,e,s,c,d,N,f,a,l=[];i.lastIndex=0,o=r={type:0,children:[]};let E=0;function O(){s=n.substring(E,i.lastIndex-e[0].length),s&&o.children.push({type:2,value:s,parent:o})}for(;e=i.exec(n);)d=e[5]||e[8],N=e[6]||e[9],f=e[7]||e[10],d==="<!--"?(c=i.lastIndex-e[0].length,a={type:3,value:N,parent:o,loc:[{start:c,end:c+d.length},{start:i.lastIndex-f.length,end:i.lastIndex}]},l.push(a),a.parent.children.push(a)):d==="<!"?(c=i.lastIndex-e[0].length,a={type:4,value:N,parent:o,loc:[{start:c,end:c+d.length},{start:i.lastIndex-f.length,end:i.lastIndex}]},l.push(a),a.parent.children.push(a)):e[1]!=="/"?(O(),a={type:1,name:e[2]+"",attributes:S(e[3]),parent:o,children:[],loc:[{start:i.lastIndex-e[0].length,end:i.lastIndex}]},l.push(a),a.parent.children.push(a),e[4]&&e[4].indexOf("/")>-1||v.has(a.name)?(a.loc[1]=a.loc[0],a.isSelfClosingTag=!0):o=a):(O(),e[2]+""===o.name?(a=o,o=a.parent,a.loc.push({start:i.lastIndex-e[0].length,end:i.lastIndex}),s=n.substring(a.loc[0].end,a.loc[1].start),a.children.length===0&&a.children.push({type:2,value:s,parent:o})):e[2]+""===l[l.length-1].name&&l[l.length-1].isSelfClosingTag===!0&&(a=l[l.length-1],a.loc.push({start:i.lastIndex-e[0].length,end:i.lastIndex}))),E=i.lastIndex;return s=n.slice(E),o.children.push({type:2,value:s,parent:o}),r}var y=class{constructor(n){this.callback=n}async visit(n,r,o){if(await this.callback(n,r,o),Array.isArray(n.children)){let e=[];for(let s=0;s<n.children.length;s++){let c=n.children[s];e.push(this.visit(c,n,s))}await Promise.all(e)}}},g=class{constructor(n){this.callback=n}visit(n,r,o){if(this.callback(n,r,o),Array.isArray(n.children))for(let e=0;e<n.children.length;e++){let s=n.children[e];this.visit(s,n,e)}}},p=Symbol("HTMLString"),_=Symbol("AttrString"),m=Symbol("RenderFn");function u(t,n=[p]){let r={value:t};for(let o of n)Object.defineProperty(r,o,{value:!0,enumerable:!1,writable:!1});return r}function X(t){return u(t)}function P(t,n){return Object.defineProperty(t,m,{value:n,enumerable:!1}),t}var w={"&":"&amp;","<":"&lt;",">":"&gt;"};function x(t){return t.replace(/[&<>]/g,n=>w[n]||n)}function h(t){let n="";for(let[r,o]of Object.entries(t))n+=` ${r}="${o}"`;return u(n,[p,_])}function j(t,...n){let r="";for(let o=0;o<t.length;o++){r+=t[o];let e=n[o];r.endsWith("...")&&e&&typeof e=="object"?(r=r.slice(0,-3).trimEnd(),r+=h(e).value):e&&e[_]?(r=r.trimEnd(),r+=e.value):e&&e[p]?r+=e.value:typeof e=="string"?r+=x(e):(e||e===0)&&(r+=String(e))}return u(r)}function V(t,n){return new y(n).visit(t)}function F(t,n){return new g(n).visit(t)}async function C(t){let{name:n,attributes:r={}}=t,o=await Promise.all(t.children.map(e=>T(e))).then(e=>e.join(""));if(m in t){let e=await t[m](r,u(o));return e&&e[p]?e.value:x(String(e))}return n===b?o:v.has(n)?`<${t.name}${h(r).value}>`:`<${t.name}${h(r).value}>${o}</${t.name}>`}async function T(t){switch(t.type){case 0:return Promise.all(t.children.map(n=>T(n))).then(n=>n.join(""));case 1:return C(t);case 2:return`${t.value}`;case 3:return`<!--${t.value}-->`;case 4:return`<!${t.value}>`}}async function H(t,n=[]){if(!Array.isArray(n))throw new Error(`Invalid second argument for \`transform\`! Expected \`Transformer[]\` but got \`${typeof n}\``);let o=typeof t=="string"?M(t):t;for(let e of n)o=await e(o);return T(o)}export{R as COMMENT_NODE,k as DOCTYPE_NODE,I as DOCUMENT_NODE,L as ELEMENT_NODE,b as Fragment,m as RenderFn,A as TEXT_NODE,X as __unsafeHTML,P as __unsafeRenderFn,h as attrs,$ as h,j as html,M as parse,T as render,H as transform,V as walk,F as walkSync};
